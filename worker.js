const a0_0x5565fd=a0_0x1e5c;(function(_0x5906f7,_0x14a1d4){const _0xaa9840=a0_0x1e5c,_0x1db5d3=_0x5906f7();while(!![]){try{const _0x49d35a=-parseInt(_0xaa9840(0x119))/0x1+parseInt(_0xaa9840(0x130))/0x2*(-parseInt(_0xaa9840(0x160))/0x3)+-parseInt(_0xaa9840(0x123))/0x4+-parseInt(_0xaa9840(0x149))/0x5*(-parseInt(_0xaa9840(0x12e))/0x6)+-parseInt(_0xaa9840(0x151))/0x7*(parseInt(_0xaa9840(0x144))/0x8)+parseInt(_0xaa9840(0x112))/0x9*(-parseInt(_0xaa9840(0xfc))/0xa)+parseInt(_0xaa9840(0x146))/0xb;if(_0x49d35a===_0x14a1d4)break;else _0x1db5d3['push'](_0x1db5d3['shift']());}catch(_0x304525){_0x1db5d3['push'](_0x1db5d3['shift']());}}}(a0_0x3596,0x92a24));import{connect}from'cloudflare:sockets';const proxyListURL=a0_0x5565fd(0x15c);let cachedProxyList=[],proxyIP='';function a0_0x1e5c(_0x49f210,_0x344dfe){const _0x35966d=a0_0x3596();return a0_0x1e5c=function(_0x1e5cd2,_0x58a4aa){_0x1e5cd2=_0x1e5cd2-0xfc;let _0x28a29b=_0x35966d[_0x1e5cd2];return _0x28a29b;},a0_0x1e5c(_0x49f210,_0x344dfe);}function a0_0x3596(){const _0xc9f5ce=['Index\x20','Direct\x20Proxy\x20IP:\x20','toString','byteLength','30320NhIiXv','No\x20proxies\x20available\x20for\x20country:\x20','27285863jgpfxg','getWriter','padStart','5hbvlaC','dns\x20udp\x20has\x20error','finally','error','closed','websocket','\x20proxies\x20available\x20for\x20','invalid\x20SOCKS5\x20request\x20data','546ajUGIg','slice','accept','remoteConnection!.readable\x20is\x20close\x20with\x20hasIncomingData\x20is\x20','length','readyState','getUint16','replace','addEventListener','readable','addressRemote','https://raw.githubusercontent.com/7virus/aio/main/proxyList.txt','map','pipeTo','filter','420owidKM','catch','version','entries','proxyIP','retry','text','reduce','arrayBuffer','Upgrade','510nCJvGs','proxyPort','join','country','get','close','Country\x20Code:\x20','charCodeAt','connected\x20to\x20','releaseLock','url','hasError','split','isUDP','waitUntil','enqueue','Unknown','UDP','\x20out\x20of\x20bounds.\x20Only\x20','Invalid\x20addressType\x20for\x20Shadowsocks:\x20','Unknown\x20Protocol!','match','109152vKCklI','sec-websocket-protocol','decode','\x20->\x20','Destination\x20address\x20empty,\x20address\x20type\x20is:\x20','headers','log','159895oypvEl','command\x20','floor','https://1.1.1.1/dns-query','Proxy\x20list\x20updated:','UDP\x20only\x20support\x20for\x20DNS\x20port\x2053','send','webSocketServer\x20has\x20error','push','rawClientData','1858548TzlCbq','write','No\x20Proxy\x20List\x20URL\x20Provided!','from','message','Shadowsocks','value','retry\x20tcpSocket\x20closed\x20error','TCP','pathname','writable','1529274XKUlCL','doh\x20success\x20and\x20dns\x20message\x20length\x20is\x20','8516kCfXDI','invild\x20\x20addressType\x20is\x20','data','Trojan','getUint8','invalid\x20addressType\x20is\x20','remoteConnection!.readable\x20abort','random','portRemote','application/dns-message','set','VLESS','readableWebSocketStream\x20pipeTo\x20error','values','buffer','ReadableStream\x20was\x20canceled,\x20due\x20to\x20'];a0_0x3596=function(){return _0xc9f5ce;};return a0_0x3596();}const WS_READY_STATE_OPEN=0x1,WS_READY_STATE_CLOSING=0x2;async function getProxyList(_0x4d4fae=![]){const _0x49f607=a0_0x5565fd;if(!cachedProxyList[_0x49f607(0x155)]||_0x4d4fae){if(!proxyListURL)throw new Error(_0x49f607(0x125));const _0x527475=await fetch(proxyListURL);if(_0x527475['status']===0xc8){const _0x1169f5=(await _0x527475[_0x49f607(0x166)]()||'')[_0x49f607(0x108)]('\x0a')[_0x49f607(0x15f)](Boolean);cachedProxyList=_0x1169f5[_0x49f607(0x15d)](_0x2c8edf=>{const _0x250be4=_0x49f607,[_0x542f60,_0x322801,_0x337cf8,_0x162dc4]=_0x2c8edf[_0x250be4(0x108)](',');return{'proxyIP':_0x542f60||'Unknown','proxyPort':_0x322801||_0x250be4(0x10c),'country':_0x337cf8['toUpperCase']()||_0x250be4(0x10c),'org':_0x162dc4||'Unknown\x20Org'};})[_0x49f607(0x15f)](Boolean);}}return cachedProxyList;}export default{async 'fetch'(_0x34d142,_0x3e4654,_0x44bee8){const _0x2b2476=a0_0x5565fd;try{const _0xbd30f2=new URL(_0x34d142[_0x2b2476(0x106)]),_0x2f8f0c=_0x34d142[_0x2b2476(0x117)][_0x2b2476(0x100)](_0x2b2476(0x169)),_0x480439=new Map();async function _0x701fa8(){const _0xb72b78=_0x2b2476,_0x5ba0c8=await getProxyList(_0x3e4654),_0x1b5306=groupBy(_0x5ba0c8,_0xb72b78(0xff));for(const [_0xc7675e,_0x15f46f]of Object['entries'](_0x1b5306)){const _0x117d0f=Math[_0xb72b78(0x11b)](Math[_0xb72b78(0x137)]()*_0x15f46f['length']);_0x480439[_0xb72b78(0x13a)](_0xc7675e,_0x15f46f[_0x117d0f]);}console[_0xb72b78(0x118)](_0xb72b78(0x11d),Array[_0xb72b78(0x126)](_0x480439[_0xb72b78(0x163)]()));}_0x44bee8[_0x2b2476(0x10a)](async function _0x2e70eb(){await _0x701fa8(),setInterval(_0x701fa8,0xea60);}());if(_0x2f8f0c===_0x2b2476(0x14e)){const _0x160b5c=_0xbd30f2[_0x2b2476(0x12c)][_0x2b2476(0x111)](/^\/([A-Z]{2})(\d+)?$/);if(_0x160b5c){const _0x1b9e3e=_0x160b5c[0x1],_0x442635=_0x160b5c[0x2]?parseInt(_0x160b5c[0x2],0xa)-0x1:null;console[_0x2b2476(0x118)](_0x2b2476(0x102)+_0x1b9e3e+',\x20Index:\x20'+_0x442635);const _0x4a8a69=await getProxyList(_0x3e4654),_0x3f1b93=_0x4a8a69[_0x2b2476(0x15f)](_0x12ba63=>_0x12ba63[_0x2b2476(0xff)]===_0x1b9e3e);if(_0x3f1b93[_0x2b2476(0x155)]===0x0)return new Response(_0x2b2476(0x145)+_0x1b9e3e,{'status':0x194});let _0x3f6f0c;if(_0x442635===null)_0x3f6f0c=_0x480439[_0x2b2476(0x100)](_0x1b9e3e)||_0x3f1b93[0x0];else{if(_0x442635<0x0||_0x442635>=_0x3f1b93[_0x2b2476(0x155)])return new Response(_0x2b2476(0x140)+(_0x442635+0x1)+_0x2b2476(0x10e)+_0x3f1b93[_0x2b2476(0x155)]+_0x2b2476(0x14f)+_0x1b9e3e+'.',{'status':0x190});else _0x3f6f0c=_0x3f1b93[_0x442635];}return proxyIP=_0x3f6f0c[_0x2b2476(0x164)]+':'+_0x3f6f0c[_0x2b2476(0xfd)],console[_0x2b2476(0x118)]('Selected\x20Proxy:\x20'+proxyIP),await websockerHandler(_0x34d142);}const _0x961a70=_0xbd30f2[_0x2b2476(0x12c)][_0x2b2476(0x111)](/^\/(.+[:=-]\d+)$/);if(_0x961a70)return proxyIP=_0x961a70[0x1][_0x2b2476(0x158)](/[=:-]/,':'),console[_0x2b2476(0x118)](_0x2b2476(0x141)+proxyIP),await websockerHandler(_0x34d142,proxyIP);}}catch(_0x10e7bd){return new Response('An\x20error\x20occurred:\x20'+_0x10e7bd[_0x2b2476(0x142)](),{'status':0x1f4});}}};function groupBy(_0xe6f1a4,_0x224484){const _0xe9c821=a0_0x5565fd;return _0xe6f1a4[_0xe9c821(0x167)]((_0x5d8b3f,_0x1e4aae)=>{const _0x158d65=_0xe9c821;return(_0x5d8b3f[_0x1e4aae[_0x224484]]=_0x5d8b3f[_0x1e4aae[_0x224484]]||[])[_0x158d65(0x121)](_0x1e4aae),_0x5d8b3f;},{});}async function websockerHandler(_0x502f20){const _0x175fef=a0_0x5565fd,_0x1cdaa6=new WebSocketPair(),[_0x47547c,_0x585610]=Object[_0x175fef(0x13d)](_0x1cdaa6);_0x585610[_0x175fef(0x153)]();let _0x3f0af9='',_0x24469b='';const _0x25c82c=(_0xd5e2c8,_0x1270a3)=>{const _0x326937=_0x175fef;console[_0x326937(0x118)]('['+_0x3f0af9+':'+_0x24469b+']\x20'+_0xd5e2c8,_0x1270a3||'');},_0x6ccd09=_0x502f20[_0x175fef(0x117)]['get'](_0x175fef(0x113))||'',_0x639a97=makeReadableWebSocketStream(_0x585610,_0x6ccd09,_0x25c82c);let _0x41e377={'value':null},_0x276b48=null,_0x4d9370=![];return _0x639a97[_0x175fef(0x15e)](new WritableStream({async 'write'(_0x337cec,_0x246e48){const _0x4e8fc7=_0x175fef;if(_0x4d9370&&_0x276b48)return _0x276b48(_0x337cec);if(_0x41e377[_0x4e8fc7(0x129)]){const _0xdf01a6=_0x41e377['value'][_0x4e8fc7(0x12d)][_0x4e8fc7(0x147)]();await _0xdf01a6[_0x4e8fc7(0x124)](_0x337cec),_0xdf01a6[_0x4e8fc7(0x105)]();return;}const _0x2a7943=await protocolSniffer(_0x337cec);let _0x1deb3;if(_0x2a7943===_0x4e8fc7(0x133))_0x1deb3=parseTrojanHeader(_0x337cec);else{if(_0x2a7943===_0x4e8fc7(0x13b))_0x1deb3=parseVlessHeader(_0x337cec);else{if(_0x2a7943===_0x4e8fc7(0x128))_0x1deb3=parseShadowsocksHeader(_0x337cec);else{parseVmessHeader(_0x337cec);throw new Error(_0x4e8fc7(0x110));}}}_0x3f0af9=_0x1deb3['addressRemote'],_0x24469b=_0x1deb3[_0x4e8fc7(0x138)]+_0x4e8fc7(0x115)+(_0x1deb3[_0x4e8fc7(0x109)]?_0x4e8fc7(0x10d):_0x4e8fc7(0x12b));if(_0x1deb3[_0x4e8fc7(0x107)])throw new Error(_0x1deb3[_0x4e8fc7(0x127)]);if(_0x1deb3[_0x4e8fc7(0x109)]){if(_0x1deb3[_0x4e8fc7(0x138)]===0x35)_0x4d9370=!![];else throw new Error(_0x4e8fc7(0x11e));}if(_0x4d9370){const {write:_0xf7a929}=await handleUDPOutbound(_0x585610,_0x1deb3[_0x4e8fc7(0x162)],_0x25c82c);_0x276b48=_0xf7a929,_0x276b48(_0x1deb3[_0x4e8fc7(0x122)]);return;}handleTCPOutBound(_0x41e377,_0x1deb3[_0x4e8fc7(0x15b)],_0x1deb3[_0x4e8fc7(0x138)],_0x1deb3[_0x4e8fc7(0x122)],_0x585610,_0x1deb3[_0x4e8fc7(0x162)],_0x25c82c);},'close'(){_0x25c82c('readableWebSocketStream\x20is\x20close');},'abort'(_0x1423ee){_0x25c82c('readableWebSocketStream\x20is\x20abort',JSON['stringify'](_0x1423ee));}}))[_0x175fef(0x161)](_0x276492=>{const _0x4ecd4b=_0x175fef;_0x25c82c(_0x4ecd4b(0x13c),_0x276492);}),new Response(null,{'status':0x65,'webSocket':_0x47547c});}async function protocolSniffer(_0x4531f3){const _0x29fc09=a0_0x5565fd;if(_0x4531f3[_0x29fc09(0x143)]>=0x3e){const _0x2c565c=new Uint8Array(_0x4531f3[_0x29fc09(0x152)](0x38,0x3c));if(_0x2c565c[0x0]===0xd&&_0x2c565c[0x1]===0xa){if(_0x2c565c[0x2]===0x1||_0x2c565c[0x2]===0x3||_0x2c565c[0x2]===0x7f){if(_0x2c565c[0x3]===0x1||_0x2c565c[0x3]===0x3||_0x2c565c[0x3]===0x4)return _0x29fc09(0x133);}}}const _0x2e20fb=new Uint8Array(_0x4531f3['slice'](0x1,0x11));if(arrayBufferToHex(_0x2e20fb)['match'](/^\w{8}\w{4}4\w{3}[89ab]\w{3}\w{12}$/))return _0x29fc09(0x13b);return _0x29fc09(0x128);}async function handleTCPOutBound(_0x29f7dc,_0x27acdd,_0xfb88c8,_0x2c143f,_0x41a0bd,_0x32e219,_0x1d1b00){async function _0x2e703b(_0xec9b09,_0x176d6f){const _0x5b2933=a0_0x1e5c,_0x22fcef=connect({'hostname':_0xec9b09,'port':_0x176d6f});_0x29f7dc[_0x5b2933(0x129)]=_0x22fcef,_0x1d1b00(_0x5b2933(0x104)+_0xec9b09+':'+_0x176d6f);const _0x3c9b9f=_0x22fcef[_0x5b2933(0x12d)][_0x5b2933(0x147)]();return await _0x3c9b9f['write'](_0x2c143f),_0x3c9b9f[_0x5b2933(0x105)](),_0x22fcef;}async function _0x5d3e8e(){const _0x304863=a0_0x1e5c,_0x36511b=await _0x2e703b(proxyIP[_0x304863(0x108)](/[:=-]/)[0x0]||_0x27acdd,proxyIP[_0x304863(0x108)](/[:=-]/)[0x1]||_0xfb88c8);_0x36511b[_0x304863(0x14d)][_0x304863(0x161)](_0x2d9967=>{const _0x48fe1c=_0x304863;console[_0x48fe1c(0x118)](_0x48fe1c(0x12a),_0x2d9967);})[_0x304863(0x14b)](()=>{safeCloseWebSocket(_0x41a0bd);}),remoteSocketToWS(_0x36511b,_0x41a0bd,_0x32e219,null,_0x1d1b00);}const _0x283068=await _0x2e703b(_0x27acdd,_0xfb88c8);remoteSocketToWS(_0x283068,_0x41a0bd,_0x32e219,_0x5d3e8e,_0x1d1b00);}function makeReadableWebSocketStream(_0x5e38b3,_0x8cf08,_0x118a7e){let _0x3b078e=![];const _0x348987=new ReadableStream({'start'(_0xe512c){const _0x1a7caf=a0_0x1e5c;_0x5e38b3[_0x1a7caf(0x159)]('message',_0xce1c1c=>{const _0x35e7b7=_0x1a7caf;if(_0x3b078e)return;const _0x2faab4=_0xce1c1c[_0x35e7b7(0x132)];_0xe512c[_0x35e7b7(0x10b)](_0x2faab4);}),_0x5e38b3['addEventListener'](_0x1a7caf(0x101),()=>{safeCloseWebSocket(_0x5e38b3);if(_0x3b078e)return;_0xe512c['close']();}),_0x5e38b3['addEventListener'](_0x1a7caf(0x14c),_0xcca86d=>{const _0x4c7e20=_0x1a7caf;_0x118a7e(_0x4c7e20(0x120)),_0xe512c[_0x4c7e20(0x14c)](_0xcca86d);});const {earlyData:_0x3a38e5,error:_0x4d86ff}=base64ToArrayBuffer(_0x8cf08);if(_0x4d86ff)_0xe512c['error'](_0x4d86ff);else _0x3a38e5&&_0xe512c[_0x1a7caf(0x10b)](_0x3a38e5);},'pull'(_0x495891){},'cancel'(_0x43283c){const _0x319c1d=a0_0x1e5c;if(_0x3b078e)return;_0x118a7e(_0x319c1d(0x13f)+_0x43283c),_0x3b078e=!![],safeCloseWebSocket(_0x5e38b3);}});return _0x348987;}function parseVmessHeader(_0x549c82){}function parseShadowsocksHeader(_0x45f418){const _0x40ebfc=a0_0x5565fd,_0x14b3f8=new DataView(_0x45f418),_0x589815=_0x14b3f8[_0x40ebfc(0x134)](0x0);let _0x2bbf2e=0x0,_0x218bc0=0x1,_0x4fedd1='';switch(_0x589815){case 0x1:_0x2bbf2e=0x4,_0x4fedd1=new Uint8Array(_0x45f418['slice'](_0x218bc0,_0x218bc0+_0x2bbf2e))[_0x40ebfc(0xfe)]('.');break;case 0x3:_0x2bbf2e=new Uint8Array(_0x45f418[_0x40ebfc(0x152)](_0x218bc0,_0x218bc0+0x1))[0x0],_0x218bc0+=0x1,_0x4fedd1=new TextDecoder()[_0x40ebfc(0x114)](_0x45f418[_0x40ebfc(0x152)](_0x218bc0,_0x218bc0+_0x2bbf2e));break;case 0x4:_0x2bbf2e=0x10;const _0x1b62b5=new DataView(_0x45f418[_0x40ebfc(0x152)](_0x218bc0,_0x218bc0+_0x2bbf2e)),_0x7cc453=[];for(let _0xc58d86=0x0;_0xc58d86<0x8;_0xc58d86++){_0x7cc453[_0x40ebfc(0x121)](_0x1b62b5['getUint16'](_0xc58d86*0x2)[_0x40ebfc(0x142)](0x10));}_0x4fedd1=_0x7cc453[_0x40ebfc(0xfe)](':');break;default:return{'hasError':!![],'message':_0x40ebfc(0x10f)+_0x589815};}if(!_0x4fedd1)return{'hasError':!![],'message':_0x40ebfc(0x116)+_0x589815};const _0x9c7823=_0x218bc0+_0x2bbf2e,_0x44a91d=_0x45f418[_0x40ebfc(0x152)](_0x9c7823,_0x9c7823+0x2),_0xe6dfa=new DataView(_0x44a91d)[_0x40ebfc(0x157)](0x0);return{'hasError':![],'addressRemote':_0x4fedd1,'addressType':_0x589815,'portRemote':_0xe6dfa,'rawDataIndex':_0x9c7823+0x2,'rawClientData':_0x45f418[_0x40ebfc(0x152)](_0x9c7823+0x2),'version':null,'isUDP':_0xe6dfa==0x35};}function parseVlessHeader(_0x4cdb88){const _0x386c88=a0_0x5565fd,_0x1d2bbf=new Uint8Array(_0x4cdb88[_0x386c88(0x152)](0x0,0x1));let _0x27b325=![];const _0x127e08=new Uint8Array(_0x4cdb88['slice'](0x11,0x12))[0x0],_0x5c4743=new Uint8Array(_0x4cdb88[_0x386c88(0x152)](0x12+_0x127e08,0x12+_0x127e08+0x1))[0x0];if(_0x5c4743===0x1){}else{if(_0x5c4743===0x2)_0x27b325=!![];else return{'hasError':!![],'message':_0x386c88(0x11a)+_0x5c4743+'\x20is\x20not\x20support,\x20command\x2001-tcp,02-udp,03-mux'};}const _0x55067a=0x12+_0x127e08+0x1,_0x4bf2b6=_0x4cdb88[_0x386c88(0x152)](_0x55067a,_0x55067a+0x2),_0x4baeb6=new DataView(_0x4bf2b6)[_0x386c88(0x157)](0x0);let _0x3e5c26=_0x55067a+0x2;const _0x396ed9=new Uint8Array(_0x4cdb88['slice'](_0x3e5c26,_0x3e5c26+0x1)),_0x37e1ca=_0x396ed9[0x0];let _0xd4a25f=0x0,_0x3af114=_0x3e5c26+0x1,_0x37d359='';switch(_0x37e1ca){case 0x1:_0xd4a25f=0x4,_0x37d359=new Uint8Array(_0x4cdb88[_0x386c88(0x152)](_0x3af114,_0x3af114+_0xd4a25f))['join']('.');break;case 0x2:_0xd4a25f=new Uint8Array(_0x4cdb88[_0x386c88(0x152)](_0x3af114,_0x3af114+0x1))[0x0],_0x3af114+=0x1,_0x37d359=new TextDecoder()['decode'](_0x4cdb88[_0x386c88(0x152)](_0x3af114,_0x3af114+_0xd4a25f));break;case 0x3:_0xd4a25f=0x10;const _0x414dd5=new DataView(_0x4cdb88[_0x386c88(0x152)](_0x3af114,_0x3af114+_0xd4a25f)),_0x1d9473=[];for(let _0x2649c0=0x0;_0x2649c0<0x8;_0x2649c0++){_0x1d9473[_0x386c88(0x121)](_0x414dd5[_0x386c88(0x157)](_0x2649c0*0x2)[_0x386c88(0x142)](0x10));}_0x37d359=_0x1d9473[_0x386c88(0xfe)](':');break;default:return{'hasError':!![],'message':_0x386c88(0x131)+_0x37e1ca};}if(!_0x37d359)return{'hasError':!![],'message':'addressValue\x20is\x20empty,\x20addressType\x20is\x20'+_0x37e1ca};return{'hasError':![],'addressRemote':_0x37d359,'addressType':_0x37e1ca,'portRemote':_0x4baeb6,'rawDataIndex':_0x3af114+_0xd4a25f,'rawClientData':_0x4cdb88[_0x386c88(0x152)](_0x3af114+_0xd4a25f),'version':new Uint8Array([_0x1d2bbf[0x0],0x0]),'isUDP':_0x27b325};}function parseTrojanHeader(_0x571c67){const _0x3a7a7c=a0_0x5565fd,_0x46e09c=_0x571c67['slice'](0x3a);if(_0x46e09c[_0x3a7a7c(0x143)]<0x6)return{'hasError':!![],'message':_0x3a7a7c(0x150)};let _0x190817=![];const _0x1ff397=new DataView(_0x46e09c),_0xd1880e=_0x1ff397[_0x3a7a7c(0x134)](0x0);if(_0xd1880e==0x3)_0x190817=!![];else{if(_0xd1880e!=0x1)throw new Error('Unsupported\x20command\x20type!');}let _0xc55ea=_0x1ff397[_0x3a7a7c(0x134)](0x1),_0x8b2699=0x0,_0x4650d2=0x2,_0x298a40='';switch(_0xc55ea){case 0x1:_0x8b2699=0x4,_0x298a40=new Uint8Array(_0x46e09c[_0x3a7a7c(0x152)](_0x4650d2,_0x4650d2+_0x8b2699))[_0x3a7a7c(0xfe)]('.');break;case 0x3:_0x8b2699=new Uint8Array(_0x46e09c['slice'](_0x4650d2,_0x4650d2+0x1))[0x0],_0x4650d2+=0x1,_0x298a40=new TextDecoder()[_0x3a7a7c(0x114)](_0x46e09c['slice'](_0x4650d2,_0x4650d2+_0x8b2699));break;case 0x4:_0x8b2699=0x10;const _0x2c0d33=new DataView(_0x46e09c['slice'](_0x4650d2,_0x4650d2+_0x8b2699)),_0x2af304=[];for(let _0xb6b4=0x0;_0xb6b4<0x8;_0xb6b4++){_0x2af304[_0x3a7a7c(0x121)](_0x2c0d33[_0x3a7a7c(0x157)](_0xb6b4*0x2)[_0x3a7a7c(0x142)](0x10));}_0x298a40=_0x2af304[_0x3a7a7c(0xfe)](':');break;default:return{'hasError':!![],'message':_0x3a7a7c(0x135)+_0xc55ea};}if(!_0x298a40)return{'hasError':!![],'message':'address\x20is\x20empty,\x20addressType\x20is\x20'+_0xc55ea};const _0x391e9b=_0x4650d2+_0x8b2699,_0xc4b3d0=_0x46e09c['slice'](_0x391e9b,_0x391e9b+0x2),_0x39cce4=new DataView(_0xc4b3d0)[_0x3a7a7c(0x157)](0x0);return{'hasError':![],'addressRemote':_0x298a40,'addressType':_0xc55ea,'portRemote':_0x39cce4,'rawDataIndex':_0x391e9b+0x4,'rawClientData':_0x46e09c[_0x3a7a7c(0x152)](_0x391e9b+0x4),'version':null,'isUDP':_0x190817};}async function remoteSocketToWS(_0x13ed54,_0x369649,_0x4aa5e9,_0x52a3e9,_0x1918ca){const _0x397517=a0_0x5565fd;let _0x46b3e4=_0x4aa5e9,_0x2e0916=![];await _0x13ed54['readable']['pipeTo'](new WritableStream({'start'(){},async 'write'(_0x2a725c,_0x6b2587){const _0x1c3e11=a0_0x1e5c;_0x2e0916=!![],_0x369649[_0x1c3e11(0x156)]!==WS_READY_STATE_OPEN&&_0x6b2587[_0x1c3e11(0x14c)]('webSocket.readyState\x20is\x20not\x20open,\x20maybe\x20close'),_0x46b3e4?(_0x369649[_0x1c3e11(0x11f)](await new Blob([_0x46b3e4,_0x2a725c])[_0x1c3e11(0x168)]()),_0x46b3e4=null):_0x369649[_0x1c3e11(0x11f)](_0x2a725c);},'close'(){const _0x495d31=a0_0x1e5c;_0x1918ca(_0x495d31(0x154)+_0x2e0916);},'abort'(_0x2b6400){const _0x3d0e07=a0_0x1e5c;console[_0x3d0e07(0x14c)](_0x3d0e07(0x136),_0x2b6400);}}))['catch'](_0x238906=>{const _0x149d38=a0_0x1e5c;console[_0x149d38(0x14c)]('remoteSocketToWS\x20has\x20exception\x20',_0x238906['stack']||_0x238906),safeCloseWebSocket(_0x369649);}),_0x2e0916===![]&&_0x52a3e9&&(_0x1918ca(_0x397517(0x165)),_0x52a3e9());}function base64ToArrayBuffer(_0x414d46){const _0x2750db=a0_0x5565fd;if(!_0x414d46)return{'error':null};try{_0x414d46=_0x414d46['replace'](/-/g,'+')['replace'](/_/g,'/');const _0x38751f=atob(_0x414d46),_0x759e76=Uint8Array[_0x2750db(0x126)](_0x38751f,_0xeb223f=>_0xeb223f[_0x2750db(0x103)](0x0));return{'earlyData':_0x759e76[_0x2750db(0x13e)],'error':null};}catch(_0x433c41){return{'error':_0x433c41};}}function arrayBufferToHex(_0x4bde29){const _0x26ac7e=a0_0x5565fd;return[...new Uint8Array(_0x4bde29)][_0x26ac7e(0x15d)](_0x321823=>_0x321823[_0x26ac7e(0x142)](0x10)[_0x26ac7e(0x148)](0x2,'0'))[_0x26ac7e(0xfe)]('');}async function handleUDPOutbound(_0x387ab7,_0x1e4b69,_0x544f2d){const _0x48a385=a0_0x5565fd;let _0x493959=![];const _0x186fe0=new TransformStream({'start'(_0x1a2bf1){},'transform'(_0x3005ac,_0x400520){const _0x1bfe27=a0_0x1e5c;for(let _0x351fb9=0x0;_0x351fb9<_0x3005ac[_0x1bfe27(0x143)];){const _0x1dbad3=_0x3005ac['slice'](_0x351fb9,_0x351fb9+0x2),_0x5c0bc5=new DataView(_0x1dbad3)[_0x1bfe27(0x157)](0x0),_0x3afae9=new Uint8Array(_0x3005ac[_0x1bfe27(0x152)](_0x351fb9+0x2,_0x351fb9+0x2+_0x5c0bc5));_0x351fb9=_0x351fb9+0x2+_0x5c0bc5,_0x400520[_0x1bfe27(0x10b)](_0x3afae9);}},'flush'(_0x2c5438){}});_0x186fe0[_0x48a385(0x15a)][_0x48a385(0x15e)](new WritableStream({async 'write'(_0x38ae6b){const _0x37a0ca=_0x48a385,_0x4129c7=await fetch(_0x37a0ca(0x11c),{'method':'POST','headers':{'content-type':_0x37a0ca(0x139)},'body':_0x38ae6b}),_0x441df0=await _0x4129c7[_0x37a0ca(0x168)](),_0x40d43d=_0x441df0['byteLength'],_0x562e3c=new Uint8Array([_0x40d43d>>0x8&0xff,_0x40d43d&0xff]);_0x387ab7['readyState']===WS_READY_STATE_OPEN&&(_0x544f2d(_0x37a0ca(0x12f)+_0x40d43d),_0x493959?_0x387ab7[_0x37a0ca(0x11f)](await new Blob([_0x562e3c,_0x441df0])[_0x37a0ca(0x168)]()):(_0x387ab7[_0x37a0ca(0x11f)](await new Blob([_0x1e4b69,_0x562e3c,_0x441df0])[_0x37a0ca(0x168)]()),_0x493959=!![]));}}))[_0x48a385(0x161)](_0x3dc9aa=>{const _0x193fba=_0x48a385;_0x544f2d(_0x193fba(0x14a)+_0x3dc9aa);});const _0x4b2b61=_0x186fe0[_0x48a385(0x12d)]['getWriter']();return{'write'(_0x2e28a2){const _0x5bb153=_0x48a385;_0x4b2b61[_0x5bb153(0x124)](_0x2e28a2);}};}function safeCloseWebSocket(_0x2ef52a){const _0x3a2ef6=a0_0x5565fd;try{(_0x2ef52a[_0x3a2ef6(0x156)]===WS_READY_STATE_OPEN||_0x2ef52a[_0x3a2ef6(0x156)]===WS_READY_STATE_CLOSING)&&_0x2ef52a[_0x3a2ef6(0x101)]();}catch(_0x4003de){console[_0x3a2ef6(0x14c)]('safeCloseWebSocket\x20error',_0x4003de);}}
